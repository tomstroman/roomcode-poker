<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Pass the Pebble (WebSocket)</title>
</head>
<body>
    <h1>Pass the Pebble</h1>

    <input id="player" placeholder="Your ID (A or B)">
    <input id="code" placeholder="Room Code">
    <button onclick="connect()">Join Game</button>
    <button onclick="sendPass()">Pass</button>

    <pre id="output"></pre>

    <script>
        let socket;

        async function connect() {
            const player = document.getElementById("player").value;
            const code = document.getElementById("code").value;

            socket = new WebSocket(`ws://${location.host}/ws/${code}/${player}/`);

            socket.onmessage = (event) => {
                const data = JSON.parse(event.data);
                document.getElementById("output").innerText = JSON.stringify(data, null, 2);
            };

            socket.onerror = (e) => {
                alert("WebSocket error");
                console.error(e);
            };
        }

        function sendPass() {
            if (socket && socket.readyState === WebSocket.OPEN) {
                socket.send(JSON.stringify({ action: "pass" }));
            }
        }
    </script>
</body>
</html>

